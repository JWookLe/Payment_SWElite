# 클라우드 인스턴스(Instance)란?

## 🎯 한 문장 정의

**인스턴스 = 클라우드에서 빌린 컴퓨터 (가상 서버)**

---

## 📚 쉽게 이해하기

### 비유: 집 구매 vs 호텔

```
일반 서버 구매 vs 클라우드 인스턴스

┌─────────────────────────────────────┐
│ 집 구매 (일반 서버 구매)             │
├─────────────────────────────────────┤
│ - 초기 비용: 매우 비쌈             │
│ - 유지비: 계속 나감                 │
│ - 필요 없으면? 팔아야 함 (손해)     │
│ - 확장: 리모델링 필요 (시간/비용)   │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│ 호텔 (클라우드 인스턴스)             │
├─────────────────────────────────────┤
│ - 초기 비용: 거의 없음              │
│ - 비용: 사용한 만큼만 지불          │
│ - 필요 없으면? 바로 체크아웃 가능   │
│ - 확장: 방 추가 (즉시 가능)        │
└─────────────────────────────────────┘
```

---

## 🖥️ 인스턴스의 정체

### 실제로는 "가상 컴퓨터"

```
클라우드 제공자 (AWS, KT Cloud 등)
├─ 거대한 데이터센터 소유
│  ├─ 강력한 물리 서버 수십 대
│  ├─ 네트워크
│  ├─ 디스크
│  └─ 전기, 냉각 시스템
│
당신이 빌린 부분:
├─ 가상 CPU (실제 CPU의 일부 또는 전체)
├─ 가상 RAM (메모리의 일부)
├─ 가상 디스크 (저장소의 일부)
└─ 가상 네트워크 인터페이스
```

### 당신이 실제로 받는 것

```
로그인했을 때:
┌──────────────────────────────┐
│ 독립적인 컴퓨터 같은 것      │
├──────────────────────────────┤
│ - Ubuntu/Windows OS 설치됨   │
│ - SSH로 접속 가능            │
│ - Docker 설치 가능           │
│ - 포트 열 수 있음            │
│ - 파일 저장 가능             │
│ - 마치 내 컴퓨터처럼 사용    │
└──────────────────────────────┘

사실 내 뒤에는:
- 다른 사용자 100명도 같은 물리 서버 사용 중
- 하지만 나는 모름 (완벽히 격리됨)
```

---

## 🔧 인스턴스 구성 요소

### 스펙: 4Core / 16GB / 100GB

```
4Core (CPU):
  - 프로세서 코어 4개
  - 동시에 4개의 작업 처리 가능
  - 예: docker 4개 컨테이너 동시 실행

16GB (RAM):
  - 메인 메모리 16기가
  - 실행 중인 프로그램들이 사용
  - 예: ingest-service 3GB, consumer-worker 3GB, DB 10GB

100GB (Disk):
  - 저장소 100기가
  - 운영체제, 파일, 데이터 저장
  - 예: Docker 이미지, 데이터베이스 파일

Public IP 1개:
  - 인터넷에서 접근 가능한 주소
  - 예: 125.209.xxx.xxx
  - 사용자가 이 IP로 서버에 접속
```

---

## 💻 당신의 상황 (KT Cloud)

### 할당받은 것

```
현재:
  - 인스턴스 1개 (4Core / 16GB / 100GB / Public IP 1)
  - 운영체제: Ubuntu 또는 CentOS
  - SSH 키 또는 비밀번호로 접근

나중:
  - 인스턴스 2개 추가 가능 (같은 스펙)
  - 각각 독립적인 IP
```

### 실제 접근 방식

```bash
# SSH로 연결 (당신의 첫 번째 인스턴스)
ssh -i your-key.pem user@125.209.xxx.xxx

# 들어가면 일반 Linux 환경
$ ls
$ docker --version
$ docker ps
$ ...
```

---

## 🌐 클라우드 인스턴스 vs 일반 서버

| 항목 | 일반 서버 | 클라우드 인스턴스 |
|------|---------|-----------------|
| **물리 위치** | 내 사무실 또는 IDC | 클라우드 제공자 데이터센터 |
| **초기 비용** | 높음 (장비 구매) | 거의 없음 |
| **월 비용** | 고정 (전기, 관리비) | 사용량에 따라 변동 |
| **확장** | 시간 오래 걸림 | 즉시 (클릭 하나) |
| **축소** | 불가능 (팔아야 함) | 즉시 (언제든 삭제 가능) |
| **업그레이드** | 서버 교체 필요 | 스펙 변경 (재시작 1회) |
| **관리** | 직접 | 제공자가 담당 |

---

## 🚀 당신의 Phase 5 구조에서

### 3개 인스턴스가 필요함

```
KT Cloud 콘솔에서:
  ┌─ Instance 생성
  │  ├─ Server 1 (4Core/16GB/100GB) 생성
  │  ├─ Server 2 (4Core/16GB/100GB) 생성
  │  └─ Server 3 (4Core/16GB/100GB) 생성
  │
  각 인스턴스 안에:
  ├─ Server 1 → docker compose up (ingest-service + Nginx)
  ├─ Server 2 → docker compose up (consumer-worker)
  └─ Server 3 → docker compose up (Kafka + Redis + MariaDB)
```

### 실제 작업 흐름

```
Step 1: KT Cloud에서 3개 인스턴스 신청
  └─ 각 인스턴스에 Public IP 할당받음

Step 2: SSH로 각 인스턴스에 접속
  $ ssh -i key.pem user@instance1_ip
  $ ssh -i key.pem user@instance2_ip
  $ ssh -i key.pem user@instance3_ip

Step 3: 각 인스턴스에 배포
  Instance 1: git clone → docker compose up (ingest-service)
  Instance 2: git clone → docker compose up (consumer-worker)
  Instance 3: git clone → docker compose up (Kafka+Redis+DB)

Step 4: 서로 통신
  Server 1 → Server 3:9092 (Kafka에 접속)
  Server 2 → Server 3:3306 (MariaDB에 접속)
```

---

## 💰 비용 개념

### 인스턴스 비용 = 빌린 시간 × 스펙

```
예시 (일반적인 클라우드 요금):

4Core / 16GB / 100GB 인스턴스
  - 월 $30-50 정도 (제공자마다 다름)

3개 인스턴스 × 1개월
  - 월 $90-150

필요 없으면 언제든:
  - 인스턴스 삭제 → 비용 중단
```

---

## 🎯 핵심 포인트

### 인스턴스는...

```
✅ 필요한 만큼만 빌린다
✅ 언제든 추가/제거 가능
✅ 초기 비용 거의 없다
✅ 전세계 어디서든 접근 가능
✅ 자동으로 백업 가능
✅ 한 번에 여러 대 관리 가능
```

### 주의할 점

```
⚠️ 비용: 킬링 못 하고 계속 두면 계속 청구됨
⚠️ 데이터: 인스턴스 삭제 → 데이터도 함께 삭제 (백업 필요)
⚠️ 보안: Public IP 노출 → 해킹 위험 (방화벽 설정 필수)
```

---

## 🔍 KT Cloud 인스턴스 생성 예시

### KT Cloud 콘솔에서

```
1. 상품 → 가상 서버 (Instance)
2. 인스턴스 생성 버튼
3. 설정:
   - 이름: "api-server" (Server 1)
   - OS: Ubuntu 22.04
   - 스펙: 4Core / 16GB
   - 디스크: 100GB
   - 네트워크: Public IP 할당

4. 생성 완료 → Public IP 받음 (예: 125.209.xxx.xxx)
5. SSH로 접속 가능

이 과정을 3번 반복 (Server 2, 3)
```

---

## 📌 당신이 알아야 할 것

### 인스턴스 = VPS (Virtual Private Server)

```
당신이 하는 일:
1. 클라우드 콘솔에서 "인스턴스 생성" 클릭
2. 스펙 선택 (4Core/16GB)
3. 생성 완료 (수 초~1분)
4. IP 주소 받음
5. SSH로 접속
6. Linux 명령어 사용 (docker, git 등)
7. 배포!

클라우드 제공자가 하는 일:
- 물리 서버 관리
- 네트워크 관리
- 전기/냉각 관리
- 백업 (옵션)
```

---

## 🎓 최종 정리

```
인스턴스란?

= 클라우드에서 빌린 가상 컴퓨터
= 당신만의 독립적인 서버 (실은 공유하지만 격리됨)
= 필요한 만큼만 빌릴 수 있음
= 언제든 추가/삭제 가능
= SSH로 접속해 일반 서버처럼 사용
```

---

## 💡 당신의 상황 정리

```
지금:
  KT Cloud에서 인스턴스 1개 할당받음
  (4Core/16GB/100GB/Public IP 1)

나중:
  같은 스펙의 인스턴스 2개 추가 할당 가능
  (총 3개)

하면 될 것:
  각 인스턴스에 SSH 접속
  git clone → docker compose up
  3개의 독립적인 컴퓨터로서 동작
```

---

더 궁금한 부분이 있으면 언제든 물어봐도 괜찮습니다! 😊
